{% extends "base_account.html" %}
{% block title %}Haggis - Assignment{% endblock %}

{% block content %}
	
	<h2>{{ assignmentName }}</h2>
	<p>{{ assignmentDescription }}</p> 
	
	<table>

		<thead><tr><th align="left">Evaluations</th></tr></thead>
		<tbody>
				{% if evalsTotal > 0 or groupEvaluationID != -1 or peerEvaluationID != -1 or individualEvaluationID != -1 %}
			   <tr><td>Evaluations Complete: {{ evalsTotal }}</td></tr>
			   	{% endif %}
			   	{% if groupEvaluationID == -1 or peerEvaluationID == -1 or individualEvaluationID == -1 %}
			   <td>
			   <form method="post" action="evaluation_create.php">
			   <button type="submit" name="postCreateMasterEval">Create Evaluation</button>
			   </form>
			   </td>
			   {% endif %}
			   <tr align="right">
			   	<td>
			   
			    {% if groupEvaluationID > 0 %}
			    <form method="post" action="evaluation_view.php">
		   		<button type="submit" value="{{groupEvaluationID}}" name="evaluationID">View Group Criteria</button>		
		   		</form>
		   		{% endif %}

		   		{% if peerEvaluationID > 0 %}
			    <form method="post" action="evaluation_view.php">
		   		<button type="submit" value="{{peerEvaluationID}}" name="evaluationID">View Peer Criteria</button>		
		   		</form>
		   		{% endif %}

		   		{% if individualEvaluationID > 0 %}
			    <form method="post" action="evaluation_view.php">
		   		<button type="submit" value="{{individualEvaluationID}}" name="evaluationID">View Individual Criteria</button>		
		   		</form>
		   		{% endif %}

			    {% if evalsTotal > 0 %}
		   		<form method="post" action="cumulative_results.php">
		   		<button type="submit" value="{{ assignmentID }}" name="postViewResults">View Results</button>
		   		</form>
		   		{% endif %}

			   	</td>
			   </tr>
			   </form>
		</tbody>
	</table><br><br>

<div id = "roster">
	<table>
		<thead><tr><th class="table">Roster</tr></thead>

		{% for student in students %}

			<tr><td>{{student.name}}</td></tr>

		{% endfor %}

	</table>
</div><br>

{% for group in groups %}
	<table>
		<thead><tr><th class="table">Group {{group.number}}</tr></thead>

		{% for name in group.names %}

			<tr>
				<td>{{name}}</td>
			</tr>

		{% endfor %}
		<tr><td>
			<form method='post' action='add_user_group.php'>
				Add Student: 
				<select name="peer_target">
					{% for student in students %}
					<option value="{{peer.userID}}">{{student.name}}</option>
					{% endfor %}
				</select>
				<input type="hidden" value="{{group.groupID}}" name="groupID">
				<button type="submit"> Add</button>
			</form><br>
		</td></tr>
	</table><br>
{% endfor %}


	<form method='post' action='create_group.php'>
		<input type='hidden' value='{{assignmentID}}' name='assignmentID'>
		Create New Group with Number: 
		<input type='number' min='1' name='groupNumber'>
		<button type="submit">Add</button>

	</table><br>

	</table><br><br><br><br><br><br><br><br>

	<form method="post" action="assignment_remove.php">
   		<button type="submit" value="{{ assignmentID }}" name="assignmentID">Remove assignment from class</button>

	</form>
{% endblock %}