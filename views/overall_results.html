{% extends "base_account.html" %}

{% block content %}
{% if type == 'individual' %}
	{% set labels = [] %}
	{% set scores = [] %}
	{% for student in students %}
		{% set labels = labels|merge([student.firstName ~ ' ' ~ student.lastName]) %}
	{% endfor %}
	{% for student in assignmentData %}
		{% set scores = scores|merge([student.averageRating]) %}
	{% endfor %}

	{% autoescape 'js'%}
	<script src="chart.js"></script>
	<canvas id="myChart" width="1000" height="1600"></canvas>
	<script>
	var ctx = document.getElementById("myChart");
	var labels = [];
	var scores = [];
	var colors = [];
	var red = 0;
	var blue = 0;
	var green = 0;
	{% for label in labels %}
		labels.push("{{label}}");
	{% endfor %}
	{% for score in scores %}
		scores.push({{score}});
		red = Math.floor(Math.random() * 255);
		blue = Math.floor(Math.random() * 255);
		green = Math.floor(Math.random() * 255);
		colors.push('rgb('+red+','+blue+','+green+')');
	{% endfor %}
	var myChart = new Chart(ctx, {
	    type: 'horizontalBar',
	    data: {
	        labels: labels,
	        datasets: [{
	            label: '{{assignment.title}}',
	            data: scores,
	            backgroundColor: colors,
	        }]
	    },

	    options: {
	        responsive: false,
	        responsiveAnimationDuration: 600,
	        maintainAspectRatio: false,
	        scales: {
	            xAxes: [{
	                ticks: {
	                    beginAtZero:true
	                }
	            }]
	        }

	    }
	});
	</script>
	{% endautoescape %}
{% endif %}

{% if type == 'group' %}
{% set labels = [] %}
	{% set scores = [] %}
	{% for group in groups %}
		{% set labels = labels|merge(['Group '~group.groupNumber]) %}
	{% endfor %}
	{% for group in assignmentData %}
		{% set scores = scores|merge([group.averageRating]) %}
	{% endfor %}

	{% autoescape 'js'%}
	<script src="chart.js"></script>
	<canvas id="myChart" width="1000" height="1600"></canvas>
	<script>
	var ctx = document.getElementById("myChart");
	var labels = [];
	var scores = [];
	var colors = [];
	var red = 0;
	var blue = 0;
	var green = 0;
	{% for label in labels %}
		labels.push("{{label}}");
	{% endfor %}
	{% for score in scores %}
		scores.push({{score}});
		red = Math.floor(Math.random() * 255);
		blue = Math.floor(Math.random() * 255);
		green = Math.floor(Math.random() * 255);
		colors.push('rgb('+red+','+blue+','+green+')');
	{% endfor %}
	var myChart = new Chart(ctx, {
	    type: 'horizontalBar',
	    data: {
	        labels: labels,
	        datasets: [{
	            label: '{{assignment.title}}',
	            data: scores,
	            backgroundColor: colors,
	        }]
	    },

	    options: {
	        responsive: false,
	        responsiveAnimationDuration: 600,
	        maintainAspectRatio: false,
	        scales: {
	            xAxes: [{
	                ticks: {
	                    beginAtZero:true
	                }
	            }]
	        }

	    }
	});
	</script>
	{% endautoescape %}
{% endif %}

{% endblock %}